---
title: Exploration of ICE data via SPARQL
author: Zaki Mughal
date: 2024-02-21
format:
  html:
    embed-resources: true
---

```{r, setup, include=FALSE}
if (!require("pacman")) install.packages("pacman")
pacman::p_load(here, remotes, readr, ggplot2)

remotes::install_github('cran/SPARQL')

pacman::p_load(SPARQL)

knitr::opts_knit$set(
    root.dir = here::here()
)
Sys.setenv(HERE=here::here())
```


```{r, engine='bash', include=FALSE}
cd $HERE
make db-fuseki-up
```

```{r}
# Step 1 - Set up preliminaries and define query
# Define the endpoint
endpoint <- 'http://localhost:8080/hdtservice/'


# create query statement
query <- read_file('report/2024-02-23/invitrodb-toxcast-vs-ice-graph.rq')
cat( query )

# Step 2 - Use SPARQL package to submit query and save results to a data frame
qd <- SPARQL(endpoint,query)
df <- qd$results

# Step 3 - Prep for graphing

# Numbers are usually returned as characters, so convert to numeric and create a
# variable for "average acres burned per fire"
str(df)
#df <- as.data.frame(apply(df, 2, as.numeric))
#str(df)

```
